<template name="Contracts">
    <!-- <div class="row document-header">
      <div class="col-3 col-m-3">
        <h2 class="document-title">Contratos</h2>
      </div>
      <div class="col-9 col-m-9">
        <p class="document-description">Explora los importes, años, dependencias, empresas proveedoras y otras características de más de un millón de contratos de México.</p>
      </div>
    </div> -->
    <div class="row document-body">
        <div class="col-3 col-m-3">
          <div class="filter-bar">
            <form>
                <h4 class="search-title">Filtros Avanzados</h4>

                <fieldset name="proveedores">
                  <p class="search-title">FILTRAR PROVEEDORES <a data-toggle="tooltip" data-placement="right" title="Nombre o Razón Social del Proveedor o Contratista ganador de la contratación."><i class="fa fa-question"></i></a></p>
                  <div class="multiple-controls-group">
                    <div class="multiple-control-container">
                      <input type="text" name="proveedor" placeholder="Nombre de proveedor" class="supplier_name_filter multiple-control">
                      <img src="images/button-no.png" alt="quitar" class="form-control remove-field-control">
                    </div>

                  </div>
                  <img src="images/button-yes.png" alt="agregar" class="form-control add-field-control">
                </fieldset>

                <fieldset name="dependencias">
                  <p class="search-title">FILTRAR DEPENDENCIAS <a data-toggle="tooltip" data-placement="right" title="Nombre de la Dependencia, Entidad Federativa o Municipio que realiza la contratación."><i class="fa fa-question"></i></a></p>
                  <div class="multiple-controls-group">
                    <div class="multiple-control-container">
                      <input type="text" name="dependencia" placeholder="Nombre de dependencia" class="dependency_name_filter multiple-control">
                      <img src="images/button-no.png" alt="quitar" class="form-control remove-field-control">
                    </div>

                  </div>
                  <img src="images/button-yes.png" alt="agregar" class="form-control add-field-control">
                </fieldset>

                <fieldset name="vigencia">
                  <p class="search-title">Vigencia de contrato <a data-toggle="tooltip" data-placement="right" title="Fecha de inicio y fecha de expiración del contrato reportado por la Unidad Compradora."><i class="fa fa-question"></i></a></p>
                  <p class="search-label">Fecha de Inicio (a partir de 2002)</p>
                  <input type="date" id="from_date_contracts_index" value="01/01/2002" min="2002-01-01">
                  <p class="search-label">Fecha de fin</p>
                  <input type="date" id="to_date_contracts_index" value="00/00/0000" min="2002-01-01">
                  <p>
                    <input type="checkbox" id="fecha-desconocido" checked="checked"> Incluir contratos con fecha desconocida
                  </p>
                </fieldset>

                <fieldset name="importe">
                  <p class="search-title">Importe del contrato <a data-toggle="tooltip" data-placement="right" title="Importe del contrato sin incluir el impuesto al valor agregado."><i class="fa fa-question"></i></a></p>
                  <a class="search-label importe-bucket" data-bucket="0-1000000"><p>Menor a 1 millón de pesos</p></a>
                  <a class="search-label importe-bucket" data-bucket="1000000-500000000"><p>Entre 1 millón y 500 millones</p></a>
                  <a class="search-label importe-bucket" data-bucket="500000000-1000000000"><p>Entre 500 millones a 1,000 millones</p></a>
                  <a class="search-label importe-bucket" data-bucket="1000000000-"><p>Más de mil millones</p></a>
                  <input type="text" id="importe-minimo" placeholder="Mínimo" class="search-amount">
                  <input type="text" id="importe-maximo" placeholder="Máximo" class="search-amount">
                  <p>
                    <input type="checkbox" id="importe-desconocido" checked="checked"> Incluir contratos con importe desconocido
                  </p>

                </fieldset>

                <fieldset name="tipo-adquisicion">
                  <p class="search-title">Procedimiento de contratación <a data-toggle="tooltip" data-placement="right" title="Refiere al tipo de procedimiento:

a) Licitación Pública.
- Procedimiento por regla general que debiera utilizarse para la adquisición de bienes y servicios.
b) Invitación a cuando menos tres proveedores o contratistas.
c) Adjudicación Directa.
- La ley contempla estas excepciones a la Licitación Pública para utilizarse a reserva y responsabilidad de la depencia."><i class="fa fa-question"></i></a></p>
                  <select id="tipo-adquisicion" class="search-select">
                    <option value="">Todos</option>
                    <option value="Adjudicación Directa Federal">Adjudicación directa</option>
                    <option value="Invitación a Cuando Menos 3 Personas">Invitación a 3</option>
                    <option value="Licitación Pública|Licitación Pública con OSD">Licitación</option>
                  </select>
                </fieldset>
                  <input type="button" class="search-submit fixed-filter-button" value="FILTRAR">
                <!-- <button type="reset" class="btn btn-default reset-filters">LIMPIAR</button> -->
            </form>
          </div>
        </div>
        <div class="col-9 col-m-9 contratos-content">
          <div class="row document-header">
            <div class="col-3 col-m-3">
              <h2 class="document-title">Contratos</h2>
            </div>
            <div class="col-9 col-m-9">
              <p class="document-description">Explora los importes, años, dependencias, empresas proveedoras y otras características de más de un millón de contratos de México.</p>
            </div>
          </div>
            {{#if filters }}

              <p class="search-terms-text">
                Búsqueda para:
                {{#each filter in filters }}
                  {{#if filter.hidden = true }}
                    <span class="blob" data-field="{{filter.field}}">
                      {{filter.field_name}}: {{filter.string}}
                      <i class="fa fa-times delete-blob-filter" aria-hidden="true"></i>
                    </span>
                  {{/if}}
                {{/each}}
              </p>
            {{/if}}
            {{> tabular table=TabularTables.Contracts_OCDS
            id="contract-index"  selector=selector
            class="" }}

        </div>
    </div>
</template>

<template name="link_title">
  <a href="/contracts/{{item.ocid}}?supplier={{ item.suppliers.[0]}}">{{item.tender.title}}</a>
</template>
<template name="suppliers_cell">
  <ul class="suppliers-cell list-unstyled">
      <li><a href="/orgs/{{simpleName item.suppliers.[0]}}">{{item.suppliers.[0]}}</a></li>
  </ul>
</template>
<template name="dependency_cell">
  <ul class="dependency-cell list-unstyled">
      <li><a href="/orgs/{{simpleName parties.[0].memberOf.name}}">{{parties.[0].memberOf.name}}</a></li>
  </ul>
</template>

<template name="view_contract">
  <a href="/contracts/{{item.ocid}}?supplier={{item.suppliers.[0]}}" class="button-link">Ver contrato{{ver_contrato}}</a>
</template>

<template name="contract_dates">
  Vigente desde {{ format_date item.startDate}} hasta {{ format_date item.endDate}}
</template>

<template name="contract_amount">
  {{ format_amount item.contracts.[0].value.amount }}
  <span class="contract_currency">

      {{format_currency item.contracts.[0].value.currency}}
  </span>
</template>
